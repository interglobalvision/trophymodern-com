{"version":3,"sources":["main.js"],"names":["animationSpeed","ThreeScene","models","filesLength","undefined","filesLoaded","percentLoaded","init","_this","this","$","length","addClass","$container","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","raycaster","Raycaster","directionVector","Vector3","mousePosition","x","y","clicked","renderer","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","setClearColor","controls","OrbitControls","domElement","enableDamping","dampingFactor","enableZoom","append","ambient","AmbientLight","hemi","HemisphereLight","add","position","z","focalLength","setLens","addSkybox","WP","isAdmin","axes","AxisHelper","name","scale","render","click","event","mousemove","clientX","clientY","mousewheel","e","delta","deltaX","deltaY","preventDefault","addEventListener","resize","bind","aspect","updateProjectionMatrix","reset","show","addModels","testContent","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","Mesh","Models","i","addModel","console","log","html","Math","round","removeClass","css","model","callback","Loader","Handlers","DDSLoader","loader","OBJMTLLoader","load","obj","mtl","object","url","rotation","xhr","onProgress","onError","lengthComputable","percentComplete","loaded","total","currentTarget","responseURL","dirPath","themeUrl","skybox","makeSkybox","urls","size","skyboxCubemap","ImageUtils","loadTextureCube","format","RGBFormat","skyboxShader","ShaderLib","uniforms","value","ShaderMaterial","fragmentShader","vertexShader","depthWrite","side","BackSide","requestAnimationFrame","set","unproject","sub","normalize","intersects","intersectObjects","children","target","parent","sin","Date","getTime","cos","lastHovered","traverse","node","opacity","transparent","TrophyModern","Ajaxy","ajaxLoad","is404","update","fourohfour","Swiper","singleSwiper","keyboardControl","centeredSlides","spaceBetween","slidesPerView","nextButton","prevButton","loop","onInit","on","index","slideTo","slideNext","Layout","windowWidth","width","windowHeight","height","setWindowValues","logic","off","Email","$emailForm","attr","onSubmit","ajax","type","data","serialize","success","code","onSuccess","onEmailError","error","jqXHR","textStatus","errorThrown","onAjaxError","hide","Speech","mute","speechSupported","speakContent","speakOnLoad","muteToggle","afterPageload","remove","first","loadElement","toggle","resume","pause","$element","speechSynthesis","cancel","textArray","text","split","SpeechSynthesisUtterance","lang","rate","dialogIndex","onend","speak","$ajaxyLinks","$elementsToHide","href","onpopstate","document","location","origin","pathname","unbind","beforeSend","ajaxBefore","dataType","ajaxErrorHandler","ajaxSuccess","complete","ajaxAfter","alert","respHtml","createElement","innerHTML","$bodyClasses","$content","$title","history","pushState","title","removeAttr","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, THREE, WP, Models, Swiper, speechSynthesis, SpeechSynthesisUtterance */\n\nvar animationSpeed = 700;\n\nvar ThreeScene = {\n  models: [],\n  filesLength: undefined,\n  filesLoaded: 0,\n  percentLoaded: 0,\n  init: function() {\n    var _this = this;\n\n    if (ThreeScene.percentLoaded === 0 && $('body.home').length) {\n      $('body').addClass('loading');\n    }\n\n    _this.$container = $('#three-scene');\n\n    _this.scene = new THREE.Scene();\n    _this.camera = new THREE.PerspectiveCamera(75, (window.innerWidth / window.innerHeight), 0.1, 8000);\n    _this.raycaster = new THREE.Raycaster();\n    _this.directionVector = new THREE.Vector3();\n\n    _this.mousePosition = {\n      x: 0,\n      y: 0,\n      clicked: false,\n    };\n\n    _this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n    });\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n    _this.renderer.setPixelRatio(window.devicePixelRatio);\n    _this.renderer.setClearColor(0xffffff);\n\n    _this.controls = new THREE.OrbitControls(_this.camera, _this.renderer.domElement);\n    _this.controls.enableDamping = true;\n    _this.controls.dampingFactor = 0.95;\n    _this.controls.enableZoom = false;\n\n    _this.$container.append(_this.renderer.domElement);\n\n    var ambient = new THREE.AmbientLight(0x444444);\n    var hemi = new THREE.HemisphereLight(0xffffbb, 0x080820, 1);\n\n    _this.scene.add(ambient);\n    _this.scene.add(hemi);\n\n    _this.camera.position.z = 5;\n    _this.focalLength = 15;\n    _this.camera.setLens(_this.focalLength);\n\n    _this.addSkybox();\n\n    if (WP.isAdmin == true) {\n     var axes = new THREE.AxisHelper(5);\n\n     axes.name = 'axes';\n     axes.scale.x = 0.5;\n     axes.scale.y = 0.5;\n     axes.scale.z = 0.5;\n\n     _this.scene.add(axes);\n    }\n\n    _this.render();\n\n    _this.$container.click(function(event) {\n      _this.mousePosition.clicked = true;\n    });\n\n    _this.$container.mousemove(function(event) {\n      _this.mousePosition.x = event.clientX;\n      _this.mousePosition.y = event.clientY;\n    });\n\n    _this.$container.mousewheel(function (e, delta, deltaX, deltaY) {\n      e.preventDefault();\n\n      _this.focalLength += (deltaY / 75);\n\n      if (_this.focalLength < 5) {\n        _this.focalLength = 5;\n      } else if (_this.focalLength > 150) {\n        _this.focalLength = 150;\n      }\n\n      _this.camera.setLens(_this.focalLength);\n    });\n\n    window.addEventListener('resize', _this.resize.bind(_this), false);\n\n  },\n\n  resize: function() {\n    var _this = this;\n\n    _this.camera.aspect = window.innerWidth / window.innerHeight;\n    _this.camera.updateProjectionMatrix();\n\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n\n  },\n\n  reset: function() {\n    var _this = this;\n\n    if (_this.percentLoaded === 0) {\n      $('#loading').show();\n      _this.addModels();\n    }\n\n  },\n\n  testContent: function() {\n    var _this = this;\n\n    var geometry = new THREE.BoxGeometry(1, 1, 1);\n    var material = new THREE.MeshBasicMaterial({color: 0x00ff00,});\n\n    _this.cube = new THREE.Mesh(geometry, material);\n\n    _this.scene.add(_this.cube);\n\n  },\n\n  addModels: function() {\n    var _this = this;\n\n    _this.filesLength = Models.length * 2;\n\n    // Models is declared inside the loop on index.php. It contains an array of objects.\n    for (var i = 0; i < Models.length; i++) {\n      _this.addModel(Models[i], function() {\n\n        _this.filesLoaded++;\n\n        _this.percentLoaded = (_this.filesLoaded / _this.filesLength) * 100;\n\n        console.log('Files percent loaded', _this.percentLoaded);\n\n        $('#loading-percent').html(Math.round(_this.percentLoaded) + '%');\n\n        if (_this.percentLoaded === 100) {\n          $('#loading').addClass('loaded');\n          $('body').removeClass('loading');\n        } else {\n          $('#loading-overlay').css('width', (100 - Math.round(_this.percentLoaded, 2)) + '%');\n        }\n\n      });\n    }\n\n  },\n\n  addModel: function(model, callback) {\n    var _this = this;\n\n    THREE.Loader.Handlers.add(/\\.dds$/i, new THREE.DDSLoader());\n\n    var loader = new THREE.OBJMTLLoader();\n\n    loader.load(model.obj, model.mtl, function (object) {\n\n      // Set the object post url\n      object.url = model.url;\n\n      // Set object position and rotation\n      object.position.x = model.position.x;\n      object.position.y = model.position.y;\n      object.position.z = model.position.z;\n      object.rotation.y = model.rotation.y;\n\n      //_this.models.push( object );\n      _this.scene.add(object);\n\n    }, function(xhr) {\n\n      _this.onProgress(xhr, callback);\n\n    }, _this.onError);\n  },\n\n  onProgress: function(xhr, callback) {\n    var _this = this;\n\n    if (xhr.lengthComputable) {\n      var percentComplete = xhr.loaded / xhr.total * 100;\n\n      if (percentComplete === 100) {\n        callback();\n      } else {\n        console.log('file ' + xhr.currentTarget.responseURL + ': ' + Math.round(percentComplete, 2) + '% downloaded');\n      }\n    }\n  },\n\n  onError: function(xhr) {\n    var _this = this;\n\n    console.log('some error');\n    console.log('xhr:', xhr);\n  },\n\n  addSkybox: function() {\n    var _this = this;\n\n    var dirPath = WP.themeUrl + '/img/three/skybox/';\n    var skybox = _this.makeSkybox([\n      dirPath + 'back.jpg',\n      dirPath + 'front.jpg',\n      dirPath + 'top.jpg',\n      dirPath + 'bottom.jpg',\n      dirPath + 'right.jpg',\n      dirPath + 'left.jpg',\n    ], 2048);\n\n    skybox.name = 'skybox';\n\n    _this.scene.add(skybox);\n  },\n\n  makeSkybox: function(urls, size) {\n    var skyboxCubemap = THREE.ImageUtils.loadTextureCube(urls);\n\n    skyboxCubemap.format = THREE.RGBFormat;\n\n    var skyboxShader = THREE.ShaderLib['cube'];\n\n    skyboxShader.uniforms['tCube'].value = skyboxCubemap;\n\n    return new THREE.Mesh(\n      new THREE.BoxGeometry(size, size, size),\n      new THREE.ShaderMaterial({\n        fragmentShader : skyboxShader.fragmentShader, vertexShader : skyboxShader.vertexShader,\n        uniforms : skyboxShader.uniforms, depthWrite : false, side : THREE.BackSide,\n      })\n    );\n  },\n\n  render: function() {\n    var _this = this;\n\n    requestAnimationFrame(_this.render.bind(_this));\n\n    // The following will translate the mouse coordinates into a number\n    // ranging from -1 to 1, where\n    // x == -1 && y == -1 means top-left, and\n    // x ==  1 && y ==  1 means bottom right\n    var x = ( _this.mousePosition.x / window.innerWidth ) * 2 - 1;\n    var y = -( _this.mousePosition.y / window.innerHeight ) * 2 + 1;\n\n    // Set our direction vector to those initial values\n    _this.directionVector.set(x, y, 1);\n\n    // Unpropject the vector\n    _this.directionVector.unproject(_this.camera);\n\n    // Substract the vector representing the camera position\n    _this.directionVector.sub(_this.camera.position);\n\n    // Normalize the vector, to avoid large numbers from the\n    // projection and substraction\n    _this.directionVector.normalize();\n\n    _this.raycaster.set(_this.camera.position, _this.directionVector);\n\n    // Ask the raycaster for intersects with all objects in the scene:\n    // (The second arguments means \"recursive\")\n    var intersects = _this.raycaster.intersectObjects(_this.scene.children, true);\n\n    if (intersects.length) {\n\n      // intersections are, by default, ordered by distance,\n      // so we only care for the first one. The intersection\n      // object holds the intersection point, the face that's\n      // been \"hit\" by the ray, and the object to which that\n      // face belongs. We only care for the object itself.\n      var target = intersects[0].object;\n\n      // If hovering something that is not the skybox\n      if (target.name !== 'skybox' && target.name !== 'axes') {\n\n        $('body').addClass('u-pointer');\n\n        // Rotate hovered object\n        target.parent.rotation.x += Math.sin(new Date().getTime() * 0.001 ) * 0.00002 + 0.002;\n        target.parent.rotation.y += Math.cos(new Date().getTime() * 0.001 ) * 0.00003 + 0.002;\n        target.parent.rotation.z += Math.sin(new Date().getTime() * 0.0002 ) * 0.00002 - 0.002;\n\n        // Change hovered object opacity thruout all branches of the paternt object\n        if (target.parent !== _this.lastHovered) {\n          target.parent.traverse( function(node) {\n            if (node.material) {\n              node.material.opacity = 0.5;\n              node.material.transparent = true;\n            }\n          });\n\n          _this.lastHovered = target.parent;\n        }\n\n        // If clicked\n        if (_this.mousePosition.clicked) {\n          console.log('Going to: ', target.parent.url);\n          TrophyModern.Ajaxy.ajaxLoad( target.parent.url );\n        }\n\n      } else {\n        // If we are hovering the skybox AKA nothing\n\n        $('body').removeClass('u-pointer');\n\n        if (_this.lastHovered) {\n          // Reset everything's opacity\n          target.parent.traverse(function(node) {\n            if (node.material) {\n              node.material.opacity = 1;\n              node.material.transparent = true;\n            }\n          });\n\n          _this.lastHovered = false;\n        }\n      }\n\n      _this.mousePosition.clicked = false;\n\n    }\n\n    if (_this.is404) {\n      if (_this.scene.children[3]) {\n        _this.scene.children[3].rotation.x += 0.005;\n        _this.scene.children[3].rotation.y += 0.001;\n        _this.scene.children[3].rotation.z += 0.003;\n      }\n    }\n\n    _this.controls.update();\n    _this.renderer.render(_this.scene, _this.camera);\n\n  },\n\n  fourohfour: function() {\n    _this = this;\n\n    var model = {\n      name: '404',\n      obj: WP.themeUrl + '/img/404.obj',\n      mtl: WP.themeUrl + '/img/404.mtl',\n      x: 0,\n      y: 0,\n      z: 0,\n    };\n\n    _this.addModel(model);\n    _this.is404 = true;\n  },\n};\n\nvar TrophyModern = {\n};\n\nTrophyModern.Swiper = {\n  singleSwiper: undefined,\n  init: function() {\n    var _this = this;\n\n    _this.singleSwiper = new Swiper('.swiper-container', {\n      keyboardControl: true,\n      centeredSlides: true,\n      spaceBetween: 0,\n      slidesPerView: 'auto',\n      nextButton: '.swiper-next',\n      prevButton: '.swiper-prev',\n      loop: true,\n      onInit: function() {\n         $('.swiper-slide').css('opacity', 1);\n      }\n    });\n\n    $('.swiper-slide').on({\n      click: function() {\n\n        if ($(this).index() === ($('.swiper-slide').length - 1)) {\n          _this.singleSwiper.slideTo(0);\n        } else {\n          _this.singleSwiper.slideNext();\n        }\n\n      },\n    });\n  },\n};\n\nvar Layout = {\n  windowWidth: $(window).width(),\n  windowHeight: $(window).height(),\n  setWindowValues: function() {\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n  },\n\n  init: function() {\n    var _this = this;\n\n    _this.logic();\n    _this.setWindowValues();\n\n    $(window).resize(function() {\n      _this.setWindowValues();\n      _this.logic();\n    });\n  },\n\n  logic: function() {\n    $('#page-copy').css('min-height', this.windowHeight + 'px');\n  },\n\n  reset: function() {\n    var _this = this;\n\n    $(window).off('resize');\n    _this.init();\n  },\n\n};\n\nTrophyModern.Email = {\n  $emailForm: null,\n  init: function() {\n    var _this = this;\n\n    _this. $emailForm = $('#form-inquiries');\n\n    var url = _this.$emailForm.attr('action');\n\n    _this.$emailForm.on('submit', function(e) {\n      e.preventDefault();\n      _this.onSubmit();\n\n      $.ajax({\n        type: 'POST',\n        url: url,\n        data: _this.$emailForm.serialize(),\n        success: function(data) {\n          if (data.code === 1) {\n            _this.onSuccess();\n          } else {\n            _this.onEmailError(data.code);\n          }\n        },\n\n        error: function(jqXHR, textStatus, errorThrown) {\n          _this.onAjaxError(jqXHR, textStatus, errorThrown);\n        },\n      });\n\n    });\n\n  },\n\n  onSubmit: function() {\n    var _this = this;\n\n    _this.$emailForm.css('background-color', 'gray');\n    $('#form-inquiries-submit').attr('disabled', true).html('Sending...');\n  },\n\n  onSuccess: function() {\n    var _this = this;\n\n    $('#form-inquiries-inputs').hide();\n    $('#form-inquiries-output').show();\n  },\n\n  onEmailError: function(code) {\n    var _this = this;\n\n    console.log(code);\n  },\n\n  onAjaxError: function(jqXHR, textStatus, errorThrown) {\n    var _this = this;\n\n    console.log(textStatus);\n    console.log(errorThrown);\n    console.log(jqXHR);\n  },\n\n  reset: function() {\n    var _this = this;\n\n    _this.$emailForm.off();\n    _this.init();\n  },\n\n};\n\nTrophyModern.Speech = {\n  mute: false,\n  speechSupported: false,\n  speakContent: undefined,\n  speakOnLoad: undefined,\n  speechSupported: false,\n  init: function() {\n    var _this = this;\n\n    // Feature detection\n    if ('speechSynthesis' in window) {\n\n      _this.speechSupported = true;\n      $('.nav-mute-toggle').on({\n        click: function() {\n          _this.muteToggle();\n        },\n      });\n\n      _this.afterPageload();\n    } else {\n      $('#bottom-left').remove();\n    }\n\n  },\n\n  afterPageload: function() {\n    var _this = this;\n\n    if( _this.speechSupported ) {\n      _this.speakOnLoad = $('.speak-on-load').first();\n\n      if (!_this.mute && _this.speakOnLoad.length) {\n        _this.loadElement(_this.speakOnLoad);\n      }\n    }\n  },\n\n  muteToggle: function() {\n    var _this = this;\n\n    $('.nav-mute-toggle').toggle();\n\n    if (_this.mute) {\n      _this.resume();\n      _this.mute = false;\n    } else {\n      _this.pause();\n      _this.mute = true;\n    }\n  },\n\n  loadElement: function($element) {\n    var _this = this;\n\n    speechSynthesis.cancel();\n\n    _this.textArray = $element.text().split(\". \");\n\n    _this.speakContent = undefined;\n    _this.speakContent = new SpeechSynthesisUtterance();\n    _this.speakContent.text = _this.textArray[0];\n    _this.speakContent.lang = 'en-US';\n    _this.speakContent.rate = 0.9;\n\n    _this.dialogIndex = 0;\n    _this.speakContent.onend = function(event) {\n      _this.dialogIndex++;\n      if (_this.dialogIndex < _this.textArray.length) {\n        _this.speakContent.text = _this.textArray[_this.dialogIndex];\n        _this.speak();\n      } else {\n        _this.dialogIndex = 0;\n      }\n    }\n\n    if (!_this.mute) {\n      _this.speak();\n\n    }\n\n  },\n\n  speak: function() {\n    speechSynthesis.speak(this.speakContent);\n  },\n\n  pause: function() {\n    speechSynthesis.pause(this.speakContent);\n\n  },\n\n  resume: function() {\n    speechSynthesis.resume(this.speakContent);\n  },\n\n};\n\n// AJAX\nTrophyModern.Ajaxy = {\n  init: function() {\n    var _this = this;\n\n    _this.$ajaxyLinks = $('a.ajax-link');\n    _this.$elementsToHide = $('.nav, #main-container, #three-scene');\n\n    // Find all ajaxy links and bind ajax event\n    _this.$ajaxyLinks.click(function(event) {\n      event.preventDefault();\n\n      var url = event.currentTarget.href;\n\n      _this.ajaxLoad(url);\n\n    });\n\n    // For back button\n    window.onpopstate = function() {\n      _this.ajaxLoad(document.location.origin + document.location.pathname);\n    };\n  },\n\n  reset: function() {\n    var _this = this;\n\n    // Unbind click from all ajax links\n    _this.$ajaxyLinks.unbind('click');\n\n    // Re initiate\n    _this.init();\n  },\n\n  ajaxLoad: function(url) {\n    var _this = this;\n\n    $.ajax(url, {\n      beforeSend: function() {\n        _this.ajaxBefore();\n      },\n\n      dataType: 'html',\n      error: function(jqXHR, textStatus) {\n        _this.ajaxErrorHandler(jqXHR, textStatus);\n      },\n\n      success: function(data) {\n        _this.ajaxSuccess(data, url);\n      },\n\n      complete: function() {\n        _this.ajaxAfter();\n      },\n    });\n  },\n\n  ajaxBefore: function() {\n    var _this = this;\n\n    if (ThreeScene.percentLoaded === 0) {\n      $('#loading').show();\n    }\n    $('body').addClass('loading');\n  },\n\n  ajaxAfter: function() {\n    var _this = this;\n\n\n    if( $('body.home').length ) {\n      if (ThreeScene.percentLoaded !== 0) {\n        $('body').removeClass('loading');\n      }\n    } else {\n      $('body').removeClass('loading');\n    }\n\n    _this.reset();\n\n    // Resets from other parts of the website\n    TrophyModern.Swiper.init();\n    Layout.reset();\n    TrophyModern.Email.reset();\n    TrophyModern.Speech.afterPageload();\n    ThreeScene.reset();\n\n    if ($('.error404').length) {\n      ThreeScene.fourohfour();\n    }\n  },\n\n  ajaxErrorHandler: function(jqXHR, textStatus) {\n    alert(textStatus);\n    console.log(jqXHR);\n  },\n\n  ajaxSuccess: function(data,url) {\n\n    // Convert data into proper html to be able to fully parse thru jQuery\n    var respHtml = document.createElement('html');\n\n    respHtml.innerHTML = data;\n\n    // Get changes: body classes, page title, main content, header\n    var $bodyClasses = $('body', respHtml).attr('class');\n    var $content = $('#main-container', respHtml);\n    var $title = $('title', respHtml).text();\n\n    // Push new history state and update title\n    history.pushState(null, $title, url);\n    document.title = $title;\n\n    // Update with new content and classes\n    $('#main-container').html($content.html());\n    $('body').removeAttr('class').addClass($bodyClasses + ' loading');\n\n  },\n};\n\n$(document).ready(function () {\n  'use strict';\n\n  TrophyModern.Swiper.init();\n  TrophyModern.Ajaxy.init();\n  TrophyModern.Email.init();\n  TrophyModern.Speech.init();\n\n  Layout.init();\n\n  ThreeScene.init();\n\n  if (typeof Models !== 'undefined') {\n    ThreeScene.addModels();\n  }\n\n  if ($('.error404').length) {\n    ThreeScene.fourohfour();\n  }\n\n});\n"],"sourceRoot":"/source/"}