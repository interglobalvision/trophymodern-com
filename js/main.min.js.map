{"version":3,"sources":["main.js"],"names":["l","data","console","log","ThreeScene","models","init","_this","this","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","renderer","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","setClearColor","controls","OrbitControls","domElement","enableDamping","dampingFactor","enableZoom","document","getElementById","appendChild","ambient","AmbientLight","directionalLight","DirectionalLight","position","set","normalize","add","z","testContent","addSkybox","addModels","render","addEventListener","resize","bind","aspect","updateProjectionMatrix","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","Mesh","i","Models","length","addModel","model","Loader","Handlers","DDSLoader","loader","OBJMTLLoader","load","obj","mtl","object","x","y","onProgress","onError","xhr","lengthComputable","percentComplete","loaded","total","Math","round","dirPath","WP","themeUrl","skybox","makeSkybox","urls","size","skyboxCubemap","ImageUtils","loadTextureCube","format","RGBFormat","skyboxShader","ShaderLib","uniforms","value","ShaderMaterial","fragmentShader","vertexShader","depthWrite","side","BackSide","requestAnimationFrame","rotation","update","TrophyModern","$","ready","Swiper","keyboardControl","centeredSlides","spaceBetween","slidesPerView","hashnav","nextButton","prevButton","Layout","windowWidth","width","windowHeight","height","setWindowValues","logic","css"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, Modernizr, THREE, WP, Models */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\nvar ThreeScene = {\n  models: [],\n  init: function() {\n    var _this = this;\n\n    _this.scene = new THREE.Scene();\n\n    _this.camera = new THREE.PerspectiveCamera(75, (window.innerWidth / window.innerHeight), 0.1, 8000);\n\n    _this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n    });\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n    _this.renderer.setPixelRatio(window.devicePixelRatio);\n    _this.renderer.setClearColor(0xffffff);\n\n    _this.controls = new THREE.OrbitControls(_this.camera, _this.renderer.domElement);\n    _this.controls.enableDamping = true;\n    _this.controls.dampingFactor = 0.95;\n    _this.controls.enableZoom = false;\n\n    document.getElementById('three-scene').appendChild(_this.renderer.domElement);\n\n    var ambient = new THREE.AmbientLight(0x444444);\n    var directionalLight = new THREE.DirectionalLight(0xffeedd);\n\n    directionalLight.position.set(0, 0, 1).normalize();\n\n    _this.scene.add( ambient );\n    _this.scene.add( directionalLight );\n\n    _this.camera.position.z = 5;\n\n    _this.testContent();\n    _this.addSkybox();\n    _this.addModels();\n\n    _this.render();\n    window.addEventListener('resize', _this.resize.bind(_this), false);\n\n  },\n\n  resize: function() {\n    var _this = this;\n\n    _this.camera.aspect = window.innerWidth / window.innerHeight;\n    _this.camera.updateProjectionMatrix();\n\n    _this.renderer.setSize( window.innerWidth, window.innerHeight );\n\n  },\n\n  testContent: function() {\n    var _this = this;\n\n    var geometry = new THREE.BoxGeometry(1, 1, 1);\n    var material = new THREE.MeshBasicMaterial( {color: 0x00ff00,} );\n\n    _this.cube = new THREE.Mesh(geometry, material);\n\n    _this.scene.add(_this.cube);\n\n  },\n\n  addModels: function() {\n    var _this = this;\n\n    // Models is declared inside the loop on index.php. It contains an array of objects.\n    for(var i = 0; i < Models.length; i++) {\n      _this.addModel( Models[i] );\n    }\n  },\n\n  addModel: function(model) {\n    var _this = this;\n\n    THREE.Loader.Handlers.add( /\\.dds$/i, new THREE.DDSLoader() );\n\n    var loader = new THREE.OBJMTLLoader();\n\n    loader.load( model.obj, model.mtl, function ( object ) {\n\n      // Hot to calculate/randomize positions ??\n      object.position.x = model.x;\n      object.position.y = model.y;\n      object.position.z = model.z;\n\n      //_this.models.push( object );\n      _this.scene.add( object );\n\n    }, _this.onProgress, _this.onError );\n  },\n\n  onProgress: function(xhr) {\n    var _this = this;\n\n    if ( xhr.lengthComputable ) {\n      var percentComplete = xhr.loaded / xhr.total * 100;\n\n      if (percentComplete === 100) {\n        console.log('Model loaded');\n      } else {\n        console.log( Math.round(percentComplete, 2) + '% downloaded' );\n      }\n    }\n  },\n\n  onError: function(xhr) {\n    var _this = this;\n\n    console.log('some error');\n  },\n\n  addSkybox: function() {\n    var _this = this;\n\n    var dirPath = WP.themeUrl + '/img/three/skybox/';\n    var skybox = _this.makeSkybox([\n      dirPath + 'back.jpg',\n      dirPath + 'front.jpg',\n      dirPath + 'top.jpg',\n      dirPath + 'bottom.jpg',\n      dirPath + 'right.jpg',\n      dirPath + 'left.jpg',\n    ], 2048 );\n\n    _this.scene.add(skybox);\n  },\n\n  makeSkybox: function(urls, size) {\n    var skyboxCubemap = THREE.ImageUtils.loadTextureCube( urls );\n\n    skyboxCubemap.format = THREE.RGBFormat;\n\n    var skyboxShader = THREE.ShaderLib['cube'];\n\n    skyboxShader.uniforms['tCube'].value = skyboxCubemap;\n\n    return new THREE.Mesh(\n      new THREE.BoxGeometry(size, size, size),\n      new THREE.ShaderMaterial({\n        fragmentShader : skyboxShader.fragmentShader, vertexShader : skyboxShader.vertexShader,\n        uniforms : skyboxShader.uniforms, depthWrite : false, side : THREE.BackSide,\n      })\n    );\n  },\n\n  render: function() {\n    var _this = this;\n\n    requestAnimationFrame(_this.render.bind(_this));\n\n    _this.cube.rotation.x += 0.001;\n    _this.cube.rotation.y += 0.0011;\n\n    _this.controls.update();\n    _this.renderer.render(_this.scene, _this.camera);\n\n  },\n};\n\nvar TrophyModern = {\n  init: function() {\n    $(document).ready(function () {\n      var mySwiper = new Swiper('.swiper-container', {\n        keyboardControl: true,\n        centeredSlides: true,\n        spaceBetween: 60,\n        slidesPerView: 'auto',\n        hashnav: true,\n        nextButton: '.swiper-next',\n        prevButton: '.swiper-prev',\n      });\n    });\n  },\n};\n\nTrophyModern.init();\n\nvar Layout = {\n  windowWidth: $(window).width(),\n  windowHeight: $(window).height(),\n  setWindowValues: function() {\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n  },\n\n  init: function() {\n    var _this = this;\n\n    _this.logic();\n\n    $(window).resize(function() {\n      _this.setWindowValues();\n      _this.logic();\n    });\n  },\n\n  logic: function() {\n    $('#page-copy').css('min-height', this.windowHeight + 'px');\n  },\n};\n\n$(document).ready(function () {\n  'use strict';\n\n  Layout.init();\n\n  ThreeScene.init();\n\n});\n"],"sourceRoot":"/source/"}