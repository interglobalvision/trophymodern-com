{"version":3,"sources":["main.js"],"names":["animationSpeed","ThreeScene","models","init","_this","this","$container","$","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","raycaster","Raycaster","directionVector","Vector3","mousePosition","x","y","clicked","renderer","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","setClearColor","controls","OrbitControls","domElement","enableDamping","dampingFactor","enableZoom","append","ambient","AmbientLight","directionalLight","DirectionalLight","position","set","normalize","add","z","addSkybox","WP","isAdmin","AxisHelper","render","click","event","clientX","clientY","addEventListener","resize","bind","aspect","updateProjectionMatrix","reset","children","length","addModels","testContent","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","Mesh","i","Models","addModel","model","Loader","Handlers","DDSLoader","loader","OBJMTLLoader","load","obj","mtl","object","url","onProgress","onError","xhr","lengthComputable","percentComplete","loaded","total","addClass","console","log","css","Math","round","dirPath","themeUrl","skybox","makeSkybox","name","urls","size","skyboxCubemap","ImageUtils","loadTextureCube","format","RGBFormat","skyboxShader","ShaderLib","uniforms","value","ShaderMaterial","fragmentShader","vertexShader","depthWrite","side","BackSide","requestAnimationFrame","unproject","sub","intersects","intersectObjects","target","parent","is404","rotation","update","fourohfour","TrophyModern","document","ready","Swiper","keyboardControl","centeredSlides","spaceBetween","slidesPerView","hashnav","nextButton","prevButton","Layout","windowWidth","width","windowHeight","height","setWindowValues","logic","off","Email","$emailForm","attr","on","e","preventDefault","onSubmit","ajax","type","data","serialize","success","code","onSuccess","onEmailError","error","jqXHR","textStatus","errorThrown","onAjaxError","html","hide","show","Speech","mute","speakContent","undefined","speakOnLoad","muteToggle","afterPageload","first","loadElement","toggle","resume","pause","$element","speechSynthesis","cancel","SpeechSynthesisUtterance","text","lang","rate","speak","Ajaxy","$ajaxyLinks","$elementsToHide","currentTarget","href","ajaxLoad","onpopstate","location","origin","pathname","unbind","beforeSend","ajaxBefore","dataType","ajaxErrorHandler","ajaxSuccess","complete","ajaxAfter","removeClass","alert","respHtml","createElement","innerHTML","$bodyClasses","$content","$title","history","pushState","title","removeAttr"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, THREE, WP, Models, Swiper, speechSynthesis, SpeechSynthesisUtterance */\n\nvar animationSpeed = 700;\n\nvar ThreeScene = {\n  models: [],\n  init: function() {\n    var _this = this;\n\n    _this.$container = $('#three-scene');\n\n    _this.scene = new THREE.Scene();\n    _this.camera = new THREE.PerspectiveCamera(75, (window.innerWidth / window.innerHeight), 0.1, 8000);\n    _this.raycaster = new THREE.Raycaster();\n    _this.directionVector = new THREE.Vector3();\n\n    _this.mousePosition = {\n      x: 0,\n      y: 0,\n      clicked: false,\n    };\n\n    _this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n    });\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n    _this.renderer.setPixelRatio(window.devicePixelRatio);\n    _this.renderer.setClearColor(0xffffff);\n\n    _this.controls = new THREE.OrbitControls(_this.camera, _this.renderer.domElement);\n    _this.controls.enableDamping = true;\n    _this.controls.dampingFactor = 0.95;\n    _this.controls.enableZoom = false;\n\n    _this.$container.append(_this.renderer.domElement);\n\n    var ambient = new THREE.AmbientLight(0x444444);\n    var directionalLight = new THREE.DirectionalLight(0xffeedd);\n\n    directionalLight.position.set(0, 0, 1).normalize();\n\n    _this.scene.add( ambient );\n    _this.scene.add( directionalLight );\n\n    _this.camera.position.z = 5;\n\n    _this.addSkybox();\n\n    if( WP.isAdmin == true ) {\n      _this.scene.add( new THREE.AxisHelper(40) );\n    }\n\n    _this.render();\n\n    _this.$container.click( function(event) {\n      _this.mousePosition.x = event.clientX;\n      _this.mousePosition.y = event.clientY;\n      _this.mousePosition.clicked = true;\n    });\n\n    window.addEventListener('resize', _this.resize.bind(_this), false);\n\n  },\n\n  resize: function() {\n    var _this = this;\n\n    _this.camera.aspect = window.innerWidth / window.innerHeight;\n    _this.camera.updateProjectionMatrix();\n\n    _this.renderer.setSize( window.innerWidth, window.innerHeight );\n\n  },\n\n  reset: function() {\n    var _this = this;\n\n    if( _this.scene.children.length <= 3 ) {\n      _this.addModels();\n    }\n  },\n\n  testContent: function() {\n    var _this = this;\n\n    var geometry = new THREE.BoxGeometry(1, 1, 1);\n    var material = new THREE.MeshBasicMaterial( {color: 0x00ff00,} );\n\n    _this.cube = new THREE.Mesh(geometry, material);\n\n    _this.scene.add(_this.cube);\n\n  },\n\n  addModels: function() {\n    var _this = this;\n\n    // Models is declared inside the loop on index.php. It contains an array of objects.\n    for(var i = 0; i < Models.length; i++) {\n      _this.addModel( Models[i] );\n    }\n  },\n\n  addModel: function(model) {\n    var _this = this;\n\n    THREE.Loader.Handlers.add( /\\.dds$/i, new THREE.DDSLoader() );\n\n    var loader = new THREE.OBJMTLLoader();\n\n    loader.load( model.obj, model.mtl, function ( object ) {\n\n      // Set the object post url\n      object.url = model.url;\n\n      // Set object position\n      object.position.x = model.x;\n      object.position.y = model.y;\n      object.position.z = model.z;\n\n      //_this.models.push( object );\n      _this.scene.add( object );\n\n    }, _this.onProgress, _this.onError );\n  },\n\n  onProgress: function(xhr) {\n    var _this = this;\n\n    if ( xhr.lengthComputable ) {\n      var percentComplete = xhr.loaded / xhr.total * 100;\n\n      if (percentComplete === 100) {\n        $('#loading').addClass('loaded');\n        console.log('Model loaded');\n      } else {\n        $('#loading-overlay').css('width', (100 - Math.round(percentComplete, 2)) + '%');\n        console.log( Math.round(percentComplete, 2) + '% downloaded' );\n      }\n    }\n  },\n\n  onError: function(xhr) {\n    var _this = this;\n\n    console.log('some error');\n    console.log('xhr:', xhr);\n  },\n\n  addSkybox: function() {\n    var _this = this;\n\n    var dirPath = WP.themeUrl + '/img/three/skybox/';\n    var skybox = _this.makeSkybox([\n      dirPath + 'back.jpg',\n      dirPath + 'front.jpg',\n      dirPath + 'top.jpg',\n      dirPath + 'bottom.jpg',\n      dirPath + 'right.jpg',\n      dirPath + 'left.jpg',\n    ], 2048 );\n\n    skybox.name = 'skybox';\n\n    _this.scene.add(skybox);\n  },\n\n  makeSkybox: function(urls, size) {\n    var skyboxCubemap = THREE.ImageUtils.loadTextureCube( urls );\n\n    skyboxCubemap.format = THREE.RGBFormat;\n\n    var skyboxShader = THREE.ShaderLib['cube'];\n\n    skyboxShader.uniforms['tCube'].value = skyboxCubemap;\n\n    return new THREE.Mesh(\n      new THREE.BoxGeometry(size, size, size),\n      new THREE.ShaderMaterial({\n        fragmentShader : skyboxShader.fragmentShader, vertexShader : skyboxShader.vertexShader,\n        uniforms : skyboxShader.uniforms, depthWrite : false, side : THREE.BackSide,\n      })\n    );\n  },\n\n  render: function() {\n    var _this = this;\n\n    requestAnimationFrame(_this.render.bind(_this));\n\n/*\n    _this.cube.rotation.x += 0.001;\n    _this.cube.rotation.y += 0.0011;\n*/\n\n    if (_this.mousePosition.clicked) {\n      _this.mousePosition.clicked = false;\n\n      // The following will translate the mouse coordinates into a number\n      //     // ranging from -1 to 1, where\n      //         //      x == -1 && y == -1 means top-left, and\n      //             //      x ==  1 && y ==  1 means bottom right\n      var x = ( _this.mousePosition.x / window.innerWidth ) * 2 - 1;\n      var y = -( _this.mousePosition.y / window.innerHeight ) * 2 + 1;\n\n      // Set our direction vector to those initial values\n      _this.directionVector.set(x, y, 1);\n\n      // Unpropject the vector\n      _this.directionVector.unproject( _this.camera );\n\n      // Substract the vector representing the camera position\n      _this.directionVector.sub(_this.camera.position);\n\n      // Normalize the vector, to avoid large numbers from the\n      // projection and substraction\n      _this.directionVector.normalize();\n\n      _this.raycaster.set(_this.camera.position, _this.directionVector);\n\n      // Ask the raycaster for intersects with all objects in the scene:\n      // (The second arguments means \"recursive\")\n      var intersects = _this.raycaster.intersectObjects(_this.scene.children, true);\n\n      if( intersects.length ) {\n\n        // intersections are, by default, ordered by distance,\n        // so we only care for the first one. The intersection\n        // object holds the intersection point, the face that's\n        // been \"hit\" by the ray, and the object to which that\n        // face belongs. We only care for the object itself.\n        var target = intersects[0].object;\n\n        // make sure we are not clicking the skybox\n        if( target.name !== 'skybox' ) {\n          console.log(target.parent.url);\n\n          // TODO: send url to router\n        }\n      }\n    }\n\n    if (_this.is404) {\n      if (_this.scene.children[3]) {\n        _this.scene.children[3].rotation.x += 0.005;\n        _this.scene.children[3].rotation.y += 0.001;\n        _this.scene.children[3].rotation.z += 0.003;\n      }\n    }\n\n    _this.controls.update();\n    _this.renderer.render(_this.scene, _this.camera);\n\n  },\n\n  fourohfour: function() {\n    _this = this;\n\n    var model = {\n      name: '404',\n      obj: WP.themeUrl + '/img/404.obj',\n      mtl: WP.themeUrl + '/img/404.mtl',\n      x: 0,\n      y: 0,\n      z: 0,\n    }\n\n    _this.addModel(model);\n    _this.is404 = true;\n  },\n};\n\nvar TrophyModern = {\n  init: function() {\n    $(document).ready(function () {\n      var mySwiper = new Swiper('.swiper-container', {\n        keyboardControl: true,\n        centeredSlides: true,\n        spaceBetween: 60,\n        slidesPerView: 'auto',\n        hashnav: true,\n        nextButton: '.swiper-next',\n        prevButton: '.swiper-prev',\n      });\n    });\n  },\n\n};\n\nTrophyModern.init();\n\nvar Layout = {\n  windowWidth: $(window).width(),\n  windowHeight: $(window).height(),\n  setWindowValues: function() {\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n  },\n\n  init: function() {\n    var _this = this;\n\n    _this.logic();\n    _this.setWindowValues();\n\n    $(window).resize(function() {\n      _this.setWindowValues();\n      _this.logic();\n    });\n  },\n\n  logic: function() {\n    $('#page-copy').css('min-height', this.windowHeight + 'px');\n  },\n\n  reset: function() {\n    var _this = this;\n\n    $(window).off('resize');\n    _this.init();\n  },\n\n};\n\nTrophyModern.Email = {\n  $emailForm: null,\n  init: function() {\n    var _this = this;\n\n    _this. $emailForm = $('#form-inquiries');\n\n    var url = _this.$emailForm.attr('action');\n\n    _this.$emailForm.on('submit', function(e) {\n      e.preventDefault();\n      _this.onSubmit();\n\n      $.ajax({\n        type: 'POST',\n        url: url,\n        data: _this.$emailForm.serialize(),\n        success: function(data) {\n          if (data.code === 1) {\n            _this.onSuccess();\n          } else {\n            _this.onEmailError(data.code);\n          }\n        },\n\n        error: function(jqXHR, textStatus, errorThrown) {\n          _this.onAjaxError(jqXHR, textStatus, errorThrown);\n        },\n      });\n\n    });\n\n  },\n\n  onSubmit: function() {\n    var _this = this;\n\n    _this.$emailForm.css('background-color', 'gray');\n    $('#form-inquiries-submit').attr('disabled', true).html('Sending...');\n  },\n\n  onSuccess: function() {\n    var _this = this;\n\n    $('#form-inquiries-inputs').hide();\n    $('#form-inquiries-output').show();\n  },\n\n  onEmailError: function(code) {\n    var _this = this;\n\n    console.log(code);\n  },\n\n  onAjaxError: function(jqXHR, textStatus, errorThrown) {\n    var _this = this;\n\n    console.log(textStatus);\n    console.log(errorThrown);\n    console.log(jqXHR);\n  },\n\n  reset: function() {\n    var _this = this;\n\n    _this.$emailForm.off();\n    _this.init();\n  },\n\n};\n\nTrophyModern.Speech = {\n  mute: false,\n  speakContent: undefined,\n  speakOnLoad: undefined,\n  init: function() {\n    var _this = this;\n\n    $('.nav-mute-toggle').on({\n      click: function() {\n        _this.muteToggle();\n      },\n    });\n\n    _this.afterPageload();\n\n  },\n\n  afterPageload: function() {\n    var _this = this;\n\n    _this.speakOnLoad = $('.speak-on-load').first();\n\n    if (!_this.mute && _this.speakOnLoad.length) {\n      _this.loadElement(_this.speakOnLoad);\n    }\n  },\n\n  muteToggle: function() {\n    var _this = this;\n\n    $('.nav-mute-toggle').toggle();\n\n    if (_this.mute) {\n      _this.resume();\n      _this.mute = false;\n    } else {\n      _this.pause();\n      _this.mute = true;\n    }\n  },\n\n  loadElement: function($element) {\n    var _this = this;\n\n    speechSynthesis.cancel();\n\n    _this.speakContent = undefined;\n    _this.speakContent = new SpeechSynthesisUtterance();\n    _this.speakContent.text = $element.text();\n    _this.speakContent.lang = 'en-US';\n    _this.speakContent.rate = 1;\n\n    if (!_this.mute) {\n      _this.speak();\n    }\n\n  },\n\n  speak: function() {\n    speechSynthesis.speak(this.speakContent);\n  },\n\n  pause: function() {\n    speechSynthesis.pause(this.speakContent);\n\n  },\n\n  resume: function() {\n    speechSynthesis.resume(this.speakContent);\n  },\n\n};\n\n// AJAX\nTrophyModern.Ajaxy = {\n  init: function() {\n    var _this = this;\n\n    _this.$ajaxyLinks = $('a.ajax-link');\n    _this.$elementsToHide = $('.nav, #main-container');\n\n    // Find all ajaxy links and bind ajax event\n    _this.$ajaxyLinks.click( function(event) {\n      event.preventDefault();\n\n      var url = event.currentTarget.href;\n\n      _this.ajaxLoad(url);\n\n    });\n\n    // For back button\n    window.onpopstate = function() {\n      _this.ajaxLoad(document.location.origin + document.location.pathname);\n    };\n  },\n\n  reset: function() {\n    var _this = this;\n\n    // Unbind click from all ajax links\n    _this.$ajaxyLinks.unbind('click');\n\n    // Re initiate\n    _this.init();\n  },\n\n  ajaxLoad: function(url) {\n    var _this = this;\n\n    $.ajax(url, {\n      beforeSend: function() {\n        _this.ajaxBefore();\n      },\n\n      dataType: 'html',\n      error: function(jqXHR, textStatus) {\n        _this.ajaxErrorHandler(jqXHR, textStatus);\n      },\n\n      success: function(data) {\n        _this.ajaxSuccess(data, url);\n      },\n\n      complete: function() {\n        _this.ajaxAfter();\n      },\n    });\n  },\n\n  ajaxBefore: function() {\n    var _this = this;\n\n    _this.$elementsToHide.addClass('loading');\n  },\n\n  ajaxAfter: function() {\n    var _this = this;\n\n    _this.$elementsToHide.removeClass('loading');\n\n    _this.reset();\n\n    // Resets from other parts of the website\n    Layout.reset();\n    TrophyModern.Email.reset();\n    TrophyModern.Speech.afterPageload();\n    ThreeScene.reset();\n\n    if ($('.error404').length) {\n      ThreeScene.fourohfour();\n    }\n  },\n\n  ajaxErrorHandler: function(jqXHR, textStatus) {\n    alert(textStatus);\n    console.log(jqXHR);\n  },\n\n  ajaxSuccess: function(data,url) {\n\n    // Convert data into proper html to be able to fully parse thru jQuery\n    var respHtml = document.createElement('html');\n\n    respHtml.innerHTML = data;\n\n    // Get changes: body classes, page title, main content, header\n    var $bodyClasses = $('body', respHtml).attr('class');\n    var $content = $('#main-container', respHtml);\n    var $title = $('title', respHtml).text();\n\n    // Push new history state and update title\n    history.pushState(null, $title, url);\n    document.title = $title;\n\n    // Update with new content and classes\n    $('#main-container').html($content.html());\n    $('body').removeAttr('class').addClass($bodyClasses);\n\n  },\n};\n\n$(document).ready(function () {\n  'use strict';\n\n  TrophyModern.Ajaxy.init();\n\n  TrophyModern.Email.init();\n  TrophyModern.Speech.init();\n\n  Layout.init();\n\n  ThreeScene.init();\n\n  if (typeof Models !== 'undefined') {\n    ThreeScene.addModels();\n  }\n\n  if ($('.error404').length) {\n    ThreeScene.fourohfour();\n  }\n\n});\n"],"sourceRoot":"/source/"}