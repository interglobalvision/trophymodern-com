{"version":3,"sources":["main.js"],"names":["ThreeScene","models","init","_this","this","scene","THREE","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","renderer","WebGLRenderer","antialias","setSize","setPixelRatio","devicePixelRatio","setClearColor","controls","OrbitControls","domElement","enableDamping","dampingFactor","enableZoom","document","getElementById","appendChild","ambient","AmbientLight","directionalLight","DirectionalLight","position","set","normalize","add","z","testContent","addSkybox","render","addEventListener","resize","bind","aspect","updateProjectionMatrix","geometry","BoxGeometry","material","MeshBasicMaterial","color","cube","Mesh","addModels","i","Models","length","addModel","model","Loader","Handlers","DDSLoader","loader","OBJMTLLoader","load","obj","mtl","object","y","onProgress","onError","xhr","lengthComputable","percentComplete","loaded","total","console","log","Math","round","dirPath","WP","themeUrl","skybox","makeSkybox","urls","size","skyboxCubemap","ImageUtils","loadTextureCube","format","RGBFormat","skyboxShader","ShaderLib","uniforms","value","ShaderMaterial","fragmentShader","vertexShader","depthWrite","side","BackSide","requestAnimationFrame","rotation","x","update","TrophyModern","$","ready","Swiper","keyboardControl","centeredSlides","spaceBetween","slidesPerView","hashnav","nextButton","prevButton","Layout","windowWidth","width","windowHeight","height","setWindowValues","logic","css","Speech","mute","speakContent","undefined","speakOnLoad","first","speechSynthesis","cancel","SpeechSynthesisUtterance","text","lang","rate","onend","speak","on","click","muteToggle","toggle","resume","pause","loadElement","selector"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, THREE, WP, Models, Swiper, speechSynthesis, SpeechSynthesisUtterance */\n\nvar ThreeScene = {\n  models: [],\n  init: function() {\n    var _this = this;\n\n    _this.scene = new THREE.Scene();\n\n    _this.camera = new THREE.PerspectiveCamera(75, (window.innerWidth / window.innerHeight), 0.1, 8000);\n\n    _this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n    });\n    _this.renderer.setSize(window.innerWidth, window.innerHeight);\n    _this.renderer.setPixelRatio(window.devicePixelRatio);\n    _this.renderer.setClearColor(0xffffff);\n\n    _this.controls = new THREE.OrbitControls(_this.camera, _this.renderer.domElement);\n    _this.controls.enableDamping = true;\n    _this.controls.dampingFactor = 0.95;\n    _this.controls.enableZoom = false;\n\n    document.getElementById('three-scene').appendChild(_this.renderer.domElement);\n\n    var ambient = new THREE.AmbientLight(0x444444);\n    var directionalLight = new THREE.DirectionalLight(0xffeedd);\n\n    directionalLight.position.set(0, 0, 1).normalize();\n\n    _this.scene.add( ambient );\n    _this.scene.add( directionalLight );\n\n    _this.camera.position.z = 5;\n\n    _this.testContent();\n    _this.addSkybox();\n\n    _this.render();\n    window.addEventListener('resize', _this.resize.bind(_this), false);\n\n  },\n\n  resize: function() {\n    var _this = this;\n\n    _this.camera.aspect = window.innerWidth / window.innerHeight;\n    _this.camera.updateProjectionMatrix();\n\n    _this.renderer.setSize( window.innerWidth, window.innerHeight );\n\n  },\n\n  testContent: function() {\n    var _this = this;\n\n    var geometry = new THREE.BoxGeometry(1, 1, 1);\n    var material = new THREE.MeshBasicMaterial( {color: 0x00ff00,} );\n\n    _this.cube = new THREE.Mesh(geometry, material);\n\n    _this.scene.add(_this.cube);\n\n  },\n\n  addModels: function() {\n    var _this = this;\n\n    // Models is declared inside the loop on index.php. It contains an array of objects.\n    for(var i = 0; i < Models.length; i++) {\n      _this.addModel( Models[i] );\n    }\n  },\n\n  addModel: function(model) {\n    var _this = this;\n\n    THREE.Loader.Handlers.add( /\\.dds$/i, new THREE.DDSLoader() );\n\n    var loader = new THREE.OBJMTLLoader();\n\n    loader.load( model.obj, model.mtl, function ( object ) {\n\n      // Hot to calculate/randomize positions ??\n      object.position.y = -100;\n      _this.scene.add( object );\n\n    }, _this.onProgress, _this.onError );\n  },\n\n  onProgress: function(xhr) {\n    var _this = this;\n\n    if ( xhr.lengthComputable ) {\n      var percentComplete = xhr.loaded / xhr.total * 100;\n\n      if (percentComplete === 100) {\n        console.log('Model loaded');\n      } else {\n        console.log( Math.round(percentComplete, 2) + '% downloaded' );\n      }\n    }\n  },\n\n  onError: function(xhr) {\n    var _this = this;\n\n    console.log('some error');\n    console.log('xhr:', xhr);\n  },\n\n  addSkybox: function() {\n    var _this = this;\n\n    var dirPath = WP.themeUrl + '/img/three/skybox/';\n    var skybox = _this.makeSkybox([\n      dirPath + 'back.jpg',\n      dirPath + 'front.jpg',\n      dirPath + 'top.jpg',\n      dirPath + 'bottom.jpg',\n      dirPath + 'right.jpg',\n      dirPath + 'left.jpg',\n    ], 2048 );\n\n    _this.scene.add(skybox);\n  },\n\n  makeSkybox: function(urls, size) {\n    var skyboxCubemap = THREE.ImageUtils.loadTextureCube( urls );\n\n    skyboxCubemap.format = THREE.RGBFormat;\n\n    var skyboxShader = THREE.ShaderLib['cube'];\n\n    skyboxShader.uniforms['tCube'].value = skyboxCubemap;\n\n    return new THREE.Mesh(\n      new THREE.BoxGeometry(size, size, size),\n      new THREE.ShaderMaterial({\n        fragmentShader : skyboxShader.fragmentShader, vertexShader : skyboxShader.vertexShader,\n        uniforms : skyboxShader.uniforms, depthWrite : false, side : THREE.BackSide,\n      })\n    );\n  },\n\n  render: function() {\n    var _this = this;\n\n    requestAnimationFrame(_this.render.bind(_this));\n\n    _this.cube.rotation.x += 0.001;\n    _this.cube.rotation.y += 0.0011;\n\n    _this.controls.update();\n    _this.renderer.render(_this.scene, _this.camera);\n  },\n};\n\nvar TrophyModern = {\n  init: function() {\n    $(document).ready(function () {\n      var mySwiper = new Swiper('.swiper-container', {\n        keyboardControl: true,\n        centeredSlides: true,\n        spaceBetween: 60,\n        slidesPerView: 'auto',\n        hashnav: true,\n        nextButton: '.swiper-next',\n        prevButton: '.swiper-prev',\n      });\n    });\n  },\n};\n\nTrophyModern.init();\n\nvar Layout = {\n  windowWidth: $(window).width(),\n  windowHeight: $(window).height(),\n  setWindowValues: function() {\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n  },\n\n  init: function() {\n    var _this = this;\n\n    _this.logic();\n\n    $(window).resize(function() {\n      _this.setWindowValues();\n      _this.logic();\n    });\n  },\n\n  logic: function() {\n    $('#page-copy').css('min-height', this.windowHeight + 'px');\n  },\n};\n\nTrophyModern.Speech = {\n  mute: false,\n  speakContent: undefined,\n  init: function() {\n    var _this = this;\n    var speakOnLoad = $('.speak-on-load').first();\n\n    speechSynthesis.cancel();\n\n    if (!_this.mute && speakOnLoad.length) {\n      _this.speakContent = new SpeechSynthesisUtterance();\n      _this.speakContent.text = speakOnLoad.text();\n      _this.speakContent.lang = 'en-US';\n      _this.speakContent.rate = 1;\n      _this.speakContent.onend = function() {\n        _this.speakContent = undefined;\n        speechSynthesis.cancel();\n      };\n\n      _this.speak();\n    }\n\n    $('.nav-mute-toggle').on({\n      click: function() {\n        _this.muteToggle();\n      },\n    });\n\n  },\n\n  muteToggle: function() {\n    var _this = this;\n\n    $('.nav-mute-toggle').toggle();\n\n    if (_this.mute) {\n      _this.resume();\n      _this.mute = false;\n    } else {\n      _this.pause();\n      _this.mute = true;\n    }\n  },\n\n  loadElement: function(selector) {\n    var _this = this;\n\n    speechSynthesis.cancel();\n\n    _this.speakContent = new SpeechSynthesisUtterance();\n    _this.speakContent.text = $(selector).text();\n    _this.speakContent.lang = 'en-US';\n    _this.speakContent.rate = 1;\n    _this.speakContent.onend = function() {\n      _this.speakContent = undefined;\n      speechSynthesis.cancel();\n    };\n\n    if (!_this.mute) {\n      _this.speak();\n    }\n\n  },\n\n  speak: function() {\n    speechSynthesis.speak(this.speakContent);\n  },\n\n  pause: function() {\n    speechSynthesis.pause(this.speakContent);\n\n  },\n\n  resume: function() {\n    speechSynthesis.resume(this.speakContent);\n\n  },\n\n};\n\n$(document).ready(function () {\n  'use strict';\n\n  Layout.init();\n\n  TrophyModern.Speech.init();\n\n  ThreeScene.init();\n\n  if (typeof Models !== 'undefined') {\n    ThreeScene.addModels();\n  }\n\n});\n"],"sourceRoot":"/source/"}