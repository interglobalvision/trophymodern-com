var ThreeScene={models:[],init:function(){var e=this;e.$container=$("#three-scene"),e.scene=new THREE.Scene,e.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,8e3),e.raycaster=new THREE.Raycaster,e.directionVector=new THREE.Vector3,e.mousePosition={x:0,y:0,clicked:!1},e.renderer=new THREE.WebGLRenderer({antialias:!0}),e.renderer.setSize(window.innerWidth,window.innerHeight),e.renderer.setPixelRatio(window.devicePixelRatio),e.renderer.setClearColor(16777215),e.controls=new THREE.OrbitControls(e.camera,e.renderer.domElement),e.controls.enableDamping=!0,e.controls.dampingFactor=.95,e.controls.enableZoom=!1,e.$container.append(e.renderer.domElement);var n=new THREE.AmbientLight(4473924),t=new THREE.DirectionalLight(16772829);t.position.set(0,0,1).normalize(),e.scene.add(n),e.scene.add(t),e.camera.position.z=5,e.addSkybox(),e.render(),e.$container.click(function(n){e.mousePosition.x=n.clientX,e.mousePosition.y=n.clientY,e.mousePosition.clicked=!0}),window.addEventListener("resize",e.resize.bind(e),!1)},resize:function(){var e=this;e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)},testContent:function(){var e=this,n=new THREE.BoxGeometry(1,1,1),t=new THREE.MeshBasicMaterial({color:65280});e.cube=new THREE.Mesh(n,t),e.scene.add(e.cube)},addModels:function(){for(var e=this,n=0;n<Models.length;n++)e.addModel(Models[n])},addModel:function(e){var n=this;THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader);var t=new THREE.OBJMTLLoader;t.load(e.obj,e.mtl,function(t){t.url=e.url,t.position.x=e.x,t.position.y=e.y,t.position.z=e.z,n.scene.add(t)},n.onProgress,n.onError)},onProgress:function(e){if(e.lengthComputable){var n=e.loaded/e.total*100;100===n?console.log("Model loaded"):console.log(Math.round(n,2)+"% downloaded")}},onError:function(e){console.log("some error"),console.log("xhr:",e)},addSkybox:function(){var e=this,n=WP.themeUrl+"/img/three/skybox/",t=e.makeSkybox([n+"back.jpg",n+"front.jpg",n+"top.jpg",n+"bottom.jpg",n+"right.jpg",n+"left.jpg"],2048);t.name="skybox",e.scene.add(t)},makeSkybox:function(e,n){var t=THREE.ImageUtils.loadTextureCube(e);t.format=THREE.RGBFormat;var o=THREE.ShaderLib.cube;return o.uniforms.tCube.value=t,new THREE.Mesh(new THREE.BoxGeometry(n,n,n),new THREE.ShaderMaterial({fragmentShader:o.fragmentShader,vertexShader:o.vertexShader,uniforms:o.uniforms,depthWrite:!1,side:THREE.BackSide}))},render:function(){var e=this;if(requestAnimationFrame(e.render.bind(e)),e.mousePosition.clicked){e.mousePosition.clicked=!1;var n=e.mousePosition.x/window.innerWidth*2-1,t=2*-(e.mousePosition.y/window.innerHeight)+1;e.directionVector.set(n,t,1),e.directionVector.unproject(e.camera),e.directionVector.sub(e.camera.position),e.directionVector.normalize(),e.raycaster.set(e.camera.position,e.directionVector);var o=e.raycaster.intersectObjects(e.scene.children,!0);if(o.length){var i=o[0].object;"skybox"!==i.name&&console.log(i.parent.url)}}e.controls.update(),e.renderer.render(e.scene,e.camera)}},TrophyModern={init:function(){$(document).ready(function(){new Swiper(".swiper-container",{keyboardControl:!0,centeredSlides:!0,spaceBetween:60,slidesPerView:"auto",hashnav:!0,nextButton:".swiper-next",prevButton:".swiper-prev"})})}};TrophyModern.init();var Layout={windowWidth:$(window).width(),windowHeight:$(window).height(),setWindowValues:function(){this.windowWidth=$(window).width(),this.windowHeight=$(window).height()},init:function(){var e=this;e.logic(),$(window).resize(function(){e.setWindowValues(),e.logic()})},logic:function(){$("#page-copy").css("min-height",this.windowHeight+"px")}};TrophyModern.Speech={mute:!1,speakContent:void 0,init:function(){var e=this,n=$(".speak-on-load").first();speechSynthesis.cancel(),!e.mute&&n.length&&(e.speakContent=new SpeechSynthesisUtterance,e.speakContent.text=n.text(),e.speakContent.lang="en-US",e.speakContent.rate=1,e.speakContent.onend=function(){e.speakContent=void 0,speechSynthesis.cancel()},e.speak()),$(".nav-mute-toggle").on({click:function(){e.muteToggle()}})},muteToggle:function(){var e=this;$(".nav-mute-toggle").toggle(),e.mute?(e.resume(),e.mute=!1):(e.pause(),e.mute=!0)},loadElement:function(e){var n=this;speechSynthesis.cancel(),n.speakContent=new SpeechSynthesisUtterance,n.speakContent.text=$(e).text(),n.speakContent.lang="en-US",n.speakContent.rate=1,n.speakContent.onend=function(){n.speakContent=void 0,speechSynthesis.cancel()},n.mute||n.speak()},speak:function(){speechSynthesis.speak(this.speakContent)},pause:function(){speechSynthesis.pause(this.speakContent)},resume:function(){speechSynthesis.resume(this.speakContent)}},$(document).ready(function(){"use strict";Layout.init(),TrophyModern.Speech.init(),ThreeScene.init(),"undefined"!=typeof Models&&ThreeScene.addModels()});
//# sourceMappingURL=main.min.js.map
